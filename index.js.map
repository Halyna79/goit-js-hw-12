{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48848335-f5abf64d59c2aabc1155fb6ba';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                Image_type: 'photo',\n                orientation: 'horisontal',\n                safesearch: true,\n                page,\n                per_page: perPage\n            },\n        });\n        return response.data;\n    } catch (error) {\n      console.error('Sorry, there are no images matching your search query. Please try again!', error);  \n  }\n}","import { comment } from \"postcss\";\n\nexport function renderImages(images) {\n    return images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n                `<div class=\"photo-card\">\n                    <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                    </a>\n                    <div class=\"info\">\n                        <p><strong>Likes:</strong> ${likes}</p>\n                        <p><strong>Views:</strong> ${views}</p>\n                        <p><strong>Comments:</strong> ${comments}</p>\n                        <p><strong>Downloads:</strong> ${downloads}</p>\n                    </div>\n                </div>`\n        )\n        .join('');\n}","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst loader = document.querySelector(\".loader\");\n\n\nlet query = \"\";\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\nlet lightbox = new SimpleLightbox('.gallery a');\n\nloadMoreBtn.hidden = true;\nloader.hidden = true;\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    query = event.target.elements.searchQuery.value.trim();\n    if (!query) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search query!\",\n            position: \"topRight\",\n        });\n        return;\n    }\n    page = 1;\n    gallery.innerHTML = \"\";\n    loadMoreBtn.hidden = true;\n    loader.hidden = true;\n\n    try {\n        const data = await fetchImages(query, page, perPage);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                title: \"Info\",\n                message: \"No results found. Try another search query!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n        gallery.innerHTML = renderImages(data.hits);\n        lightbox.refresh();\n        searchForm.reset();\n\n        if (page * perPage >= totalHits) {\n            iziToast.info({\n                title: \"End or collection\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            loadMoreBtn.hidden = true;\n        } else {\n            loadMoreBtn.hidden = false; \n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong! Please try again.\",\n            position: \"topRight\",\n        });\n    } finally {\n        loader.hidden = true;\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    if (page * perPage >= totalHits) {\n        iziToast.info({\n            title: \"End or collection\",\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n        });\n        loadMoreBtn.hidden = true;\n        return;\n    }\n    page++;\n    loadMoreBtn.hidden = true;\n    loader.hidden = false;\n    try {\n        const data = await fetchImages(query, page, perPage);\n        if (data.hits.length === 0) {\n            iziToast.info({\n                title: \"Info\",\n                message: \"No results found. Try another search query!\",\n                position: \"topRight\",\n            });\n            loadMoreBtn.hidden = true;\n            return;\n        }\n\n        gallery.insertAdjacentHTML(\"beforeend\", renderImages(data.hits));\n        lightbox.refresh();\n\n        const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 5,\n            behavior: \"smooth\"\n        });\n\n        if (page * perPage >= totalHits) {\n            iziToast.info({\n                title: \"End or collection\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n            });\n            loadMoreBtn.hidden = true;\n        } else {\n            loadMoreBtn.hidden = false;\n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Something went wrong! Please try again.\",\n            position: \"topRight\",\n        });\n    } finally {\n        loader.hidden = true;\n    }\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderImages","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","gallery","loadMoreBtn","loader","totalHits","lightbox","SimpleLightbox","event","iziToast","data","cardHeight"],"mappings":"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"}